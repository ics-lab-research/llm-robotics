# Task 5: Safety movement

def safety():
  global Waypoint_1_p=p[-0.13, -0.33, 0.25, -0.001, 3.11, 0.03]
  global Waypoint_1_q=[-1.59, -1.77, -1.56, -1.39, 1.59, -0.02]

  global Waypoint_2_p=p[0.13, -0.33, 0.24, -0.001, 3.11, 0.03]
  global Waypoint_2_q=[-0.82, -1.75, -1.61, -1.33, 1.6, 0.74]

  $ 5 "Thread_1"
  thread Thread_1():
    while (True):
      global var_1= get_actual_tcp_pose ()

      if (var_1[0]>0.1):
        popup(str_cat("",var_1), "Message", False, False, blocking=False)
        halt
      end
    end
  end

  threadId_Thread_1 = run Thread_1()
  while (True):
    movej(get_inverse_kin(Waypoint_1_p, qnear=Waypoint_1_q), a=1.39, v=1.04)

    movej(get_inverse_kin(Waypoint_2_p, qnear=Waypoint_2_q), a=1.39, v=1.04)
  end
end


